<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>Coloron Game</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" rel="stylesheet">
    <style>
        body { font-family: 'Arial', sans-serif; overflow: hidden; margin: 0; background: #f0f8ff; }
        .game-container, .start-screen, .game-over-screen { position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; flex-direction: column; }
        .ball { width: 50px; height: 50px; border-radius: 50%; position: absolute; top: 50px; left: 50%; transform: translateX(-50%); }
        .bar { width: 80%; height: 40px; position: absolute; bottom: 100px; border-radius: 20px; cursor: pointer; }
        .score { position: absolute; top: 10px; right: 10px; font-size: 2em; }
        .start-screen, .game-over-screen { background: rgba(255, 255, 255, 0.8); }
        button { padding: 10px 20px; font-size: 1.5em; cursor: pointer; }
        .background-element { position: absolute; width: 100%; bottom: 0; }
        @media (max-width: 600px) {
            .bar { width: 100%; }
            .ball { width: 40px; height: 40px; }
        }
    </style>
</head>
<body>

<div class="start-screen">
    <h1>Coloron Game</h1>
    <button onclick="startGame()">Play</button>
    <p>Instructions: Match the ball's color by clicking the bars. Remember, red always comes first!</p>
</div>

<div class="game-container" style="display: none;">
    <div class="score">Score: <span id="score">0</span></div>
    <div class="ball"></div>
    <div class="bar"></div>
    <svg class="background-element" preserveAspectRatio="none" viewBox="0 0 100 20">
        <path d="M0,10 C30,20 70,0 100,10 L100,20 L0,20 Z" fill="#87CEEB"/>
    </svg>
    <!-- Add more background elements like mountains or clouds here -->
</div>

<div class="game-over-screen" style="display: none;">
    <h2>Game Over</h2>
    <p>Your Score: <span id="finalScore"></span></p>
    <p>Grade: <span id="grade"></span></p>
    <button onclick="location.reload()">Play Again</button>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.6.0/gsap.min.js"></script>
<script>
  let score = 0;
  let gameActive = false;
  const colors = ['red', 'yellow', 'purple'];
  let currentColorIndex = 0;

  function startGame() {
    document.querySelector('.start-screen').style.display = 'none';
    document.querySelector('.game-container').style.display = 'flex';
    gameActive = true;
    animateBall();
    moveBar();
  }

  function animateBall() {
    const ball = document.querySelector('.ball');
    gsap.to(ball, {
      y: "+=500",
      duration: 2,
      yoyo: true,
      repeat: -1,
      onRepeat: () => {
        currentColorIndex = (currentColorIndex + 1) % colors.length;
        ball.style.backgroundColor = colors[currentColorIndex];
      }
    });
  }

  function moveBar() {
    const bar = document.querySelector('.bar');
    gsap.to(bar, {
      x: "random(-50, 50, 5)%",
      duration: 3,
      ease: "power1.inOut",
      repeat: -1,
      yoyo: true,
      onStart: () => bar.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)]
    });
  }

  document.querySelector('.bar').addEventListener('click', function() {
    if (!gameActive) return;
    const ballColor = document.querySelector('.ball').style.backgroundColor;
    if (this.style.backgroundColor === ballColor) {
      score += 10;
      document.getElementById('score').textContent = score;
    } else {
      gameOver();
    }
  });

  function gameOver() {
    gameActive = false;
    document.querySelector('.game-container').style.display = 'none';
    const gameOverScreen = document.querySelector('.game-over-screen');
    gameOverScreen.style.display = 'flex';
    document.getElementById('finalScore').textContent = score;
    document.getElementById('grade').textContent = score > 100 ? 'Awesome' : 'Great';
  }

  // Background animation
  gsap.to(".background-element", {
    x: "-100%",
    duration: 20,
    repeat: -1,
    ease: "linear"
  });
</script>

</body>
</html>